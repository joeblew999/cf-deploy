<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>cf-deploy example</title>
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@4/dist/full.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="min-h-screen bg-base-100 flex items-center justify-center">
    <div class="text-center space-y-6 p-8">
      <h1 class="text-4xl font-bold">cf-deploy example</h1>
      <p class="text-lg opacity-70">
        A minimal Cloudflare Worker deployed and managed with
        <a
          href="https://github.com/joeblew999/cf-deploy"
          class="link link-primary"
          >cf-deploy</a
        >.
      </p>

      <div class="stats shadow">
        <div class="stat">
          <div class="stat-title">Health</div>
          <div class="stat-value text-success" id="health-status">...</div>
          <div class="stat-desc" id="health-version"></div>
        </div>
      </div>

      <div class="flex justify-center">
        <cf-version-picker></cf-version-picker>
      </div>

      <p class="text-xs opacity-40">
        Version picker reads <code>/versions.json</code> â€” generated by
        <code>cf-deploy versions-json</code>
      </p>
    </div>

    <script type="module" src="/version-picker.js"></script>
    <script>
      fetch("/api/health")
        .then((r) => r.json())
        .then((d) => {
          document.getElementById("health-status").textContent = d.status;
          document.getElementById("health-version").textContent =
            "v" + d.version;
        })
        .catch(() => {
          document.getElementById("health-status").textContent = "offline";
          document
            .getElementById("health-status")
            .classList.replace("text-success", "text-error");
        });
    </script>
  </body>
</html>
