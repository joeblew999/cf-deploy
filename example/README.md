# cf-deploy Example

A working Cloudflare Worker managed by [cf-deploy](https://github.com/joeblew999/cf-deploy).

**Live**: https://cf-deploy-example.gedw99.workers.dev

## How cf-deploy connects to this project

```
cf-deploy.yml    ← cf-deploy reads this for worker name, domain, output paths
wrangler.toml    ← wrangler reads this for worker entry point and assets dir
package.json     ← cf-deploy reads "version" from here (configured in cf-deploy.yml)
src/index.ts     ← your worker code (must expose /api/health with { version })
public/
  index.html           ← your page — includes <cf-version-picker>
  version-picker.js    ← auto-copied by cf-deploy on every upload
  versions.json        ← auto-generated by `cf-deploy versions-json`
```

The key link: `cf-deploy.yml` tells the CLI where everything is — the worker name (for wrangler), the version source (package.json), and where to write the manifest (public/versions.json).

## Run locally

```sh
bun install
bun x wrangler dev    # → http://localhost:8788
```

## Deploy

```sh
bunx cf-deploy upload           # tagged upload, preview URL printed
bunx cf-deploy versions-json    # generate manifest from wrangler + git
bunx cf-deploy smoke            # health + index checks
bunx cf-deploy promote          # send to 100% traffic
```

> **Note**: In this repo's CI, cf-deploy is built from source (`bun ../dist/cf-deploy.js`).
> In your own project, use `bunx cf-deploy` or add `cf-deploy` as a devDependency.
